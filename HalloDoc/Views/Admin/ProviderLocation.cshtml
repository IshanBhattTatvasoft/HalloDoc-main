@using Newtonsoft.Json;
@model HalloDoc.DataLayer.ViewModels.ProviderLocationViewModel
@{
    ViewData["Title"] = "Provider Location";
}

@section Styles {
    <link href="~/css/view-case.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
}

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
    <partial name="_ValidationScriptsPartial" />
}

<div>
    <partial name="Toast"/>
    <partial name="HeaderFooter" model="@Model.adminNavbarModel"/>

    <div class="container w-50 d-flex justify-content-between align-items-center mt-4">
        <div class="col-6 ms-0 fw-bold" style="margin-left: -10px !important;">
            <span class="h4">
                Provider Location
            </span>
        </div>
        <div class="col-6 d-flex justify-content-end">
            <a class="text-info" id="backdesign" asp-controller="Admin" asp-action="AdminDashboard"
               style="text-decoration: none;">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                     class="bi bi-chevron-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                          d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0" />
                </svg>
                Back
            </a>
        </div>
    </div>
    <div class="container mt-4 shadow-lg p-3 mb-5 bg-white rounded w-50" id="main-container">
        <div id="main-sub-div-part">
            <div id="map" style="width: 100%;height:600px;"></div>
        </div>
    </div>
</div>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyARrk6kY-nnnSpReeWotnQxCAo_MoI4qbU&callback=initMap"></script>


<script>
    function initMap() {
        var map, infoWindow;
        var locations = @Html.Raw(JsonConvert.SerializeObject(Model.locationData)); // Pass model data to JS

        map = new google.maps.Map(document.getElementById("map"), {
            zoom: 4,
            center: { lat: 20.5937, lng: 78.9629 } // Default center (adjust as needed)
        });

        infoWindow = new google.maps.InfoWindow();

        locations.forEach(function (location) {
            var marker = new google.maps.Marker({
                position: { lat: location.Latitude, lng: location.Longitude },
                map: map
            });

            marker.addListener('click', function () {
                var contentString = "<b>" + location.PhysicianName + "</b>"; // Customize content
                infoWindow.setContent(contentString);
                infoWindow.open(map, marker);
            });
        });
    }
</script>