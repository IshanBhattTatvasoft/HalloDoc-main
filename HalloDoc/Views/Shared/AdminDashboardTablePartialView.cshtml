@model HalloDoc.DataLayer.ViewModels.AdminDashboardTableView


@*Location Modal*@
@*<div class="modal" id="myModal1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <section>
                <div class="mapouter">
                    <div class="gmap_canvas">
                        <iframe width="600" height="500" id="gmap_canvas" src="" frameborder="0" scrolling="no" marginheight="0" marginwidth="0">

                            <!-- </iframe><a href="https://123movies-to.org">123 movies</a><br> -->
                            <style>
                                .mapouter {
                                    position: relative;
                                    text-align: right;
                                    height: 500px;
                                    width: 600px;
                                }</style>
                            <!-- <a href="https://www.embedgooglemap.net">embedgooglemap.net</a> -->
                            <style>
                                .gmap_canvas {
                                    overflow: hidden;
                                    background: none !important;
                                    height: 500px;
                                    width: 600px;
                                }
                            </style>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>*@

<div id="myModal6" class="modal6">
    <div class="modal-content6" style="width:80%;margin-top:201px;height:50%">
        <h5 style="text-align: center;">Your Location</h5>
        <div class="gmap_canvas" style="height:80%;width:100%">
            <iframe id="gmap_canvas" style="height:95%;width:100%;border-radius:15px;" src="" frameborder="0" scrolling="no" marginheight="0" marginwidth="0">
            </iframe>
        </div>
        <span class="close6">Ok</span>
    </div>
</div>

<table id="dtBasicExample" class="table">
    <thead>
        <tr>
            <th scope="col" class="table-header">
                Name
            </th>
            <th></th>
            @if (Model.status != "Unpaid")
            {
                <th>Date Of Birth</th>
            }
            @if (Model.status == "New" || Model.status == "Pending" || Model.status == "Active")
            {
                <th>Requestor</th>
            }
            @if (Model.status != "New")
            {
                <th>Physician Name</th>
                <th>Date Of Service</th>
            }
            @if (Model.status == "New")
            {
                <th>Requested Date</th>
            }
            @if (Model.status != "ToClose")
            {
                <th style="min-width: 175px;">Phone</th>
            }
            <th>Address</th>
            @if (Model.status != "Conclude" || Model.status != "Unpaid")
            {
                <th>Notes</th>
            }
            @*<th>Chat With</th>*@
            <th>Actions</th>
        </tr>
    </thead>
    <tbody id="abcd">
        @foreach (var item in Model.requests)
        {
            var statusClass = "";
            var dos = "";
            var notes = "";
            @if (item.RequestTypeId == 1)
            {
                statusClass = "patient";
            }
            else if (item.RequestTypeId == 4)
            {
                statusClass = "business";
            }
            else if (item.RequestTypeId == 2)
            {
                statusClass = "family";
            }
            else
            {
                statusClass = "concierge";
            }
            foreach (var stat in item.RequestStatusLogs)
            {
                if (stat.Status == 2)
                {
                    dos = stat.CreatedDate.ToString("MMMM dd,yyyy");
                    notes = stat.Notes ?? "";
                }
            }
            <tr class="@statusClass">
                <td class="@statusClass first-col">@(string.Concat(item.RequestClient.FirstName, ',', item.RequestClient.LastName))</td>
                <td class="@statusClass">
                    <svg xmlns="http://www.w3.org/2000/svg" style="padding:5px;border: 1px solid white;border-radius: 5px;margin: auto 5px;" width="30" height="30"
                         fill="white" class="bi bi-envelope" viewBox="0 0 16 16">
                        <path d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1zm13 2.383-4.708 2.825L15 11.105zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741M1 11.105l4.708-2.897L1 5.383z" />
                    </svg>
                </td>
                @if (Model.status != "Unpaid")
                {
                    <td class="@statusClass">@(DateTime.Parse($"{item.RequestClient.IntYear}-{item.RequestClient.StrMonth}-{item.RequestClient.IntDate}").ToString("MMMM dd,yyyy"))(12)</td>
                }
                @if (Model.status == "New" || Model.status == "Pending" || Model.status == "Active")
                {
                    <td class="@statusClass">@(statusClass.Substring(0, 1).ToUpper() + statusClass.Substring(1).ToLower()) @(string.Concat(item.FirstName, ',', item.LastName))</td>
                }
                @if (Model.status != "New")
                {
                    <td class="@statusClass">Dr. @(item.Physician == null ? "" : item.Physician.FirstName)</td>
                }
                @if (Model.status == "New")
                {
                    <td class="@statusClass">@(item.CreatedDate.ToString("MMMM dd,yyyy"))</td>
                }
                @if (Model.status != "New")
                {
                    <td class="@statusClass">@dos</td>
                }
                @if (Model.status != "ToClose")
                {
                    <td class="@statusClass">

                        <div class="phone-td" style="width:75%">
                            <svg xmlns="http://www.w3.org/2000/svg" style="margin-right: 5px;" width="16" height="16" fill="white" class="bi bi-telephone" viewBox="0 0 16 16">
                                <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                            </svg>
                            <span class="td-data">@item.RequestClient.PhoneNumber</span>
                        </div>
                        <span class="td-data">(Patient)</span>

                        @if (item.RequestTypeId != 1)
                        {
                            <div class="phone-td" style="width:75%">
                                <svg xmlns="http://www.w3.org/2000/svg" style="margin-right: 5px;" width="16" height="16" fill="white" class="bi bi-telephone" viewBox="0 0 16 16">
                                    <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.6 17.6 0 0 0 4.168 6.608 17.6 17.6 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.68.68 0 0 0-.58-.122l-2.19.547a1.75 1.75 0 0 1-1.657-.459L5.482 8.062a1.75 1.75 0 0 1-.46-1.657l.548-2.19a.68.68 0 0 0-.122-.58zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.68.68 0 0 0 .178.643l2.457 2.457a.68.68 0 0 0 .644.178l2.189-.547a1.75 1.75 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.6 18.6 0 0 1-7.01-4.42 18.6 18.6 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877z" />
                                </svg>
                                <span class="td-data">@item.PhoneNumber</span>
                            </div>
                            @($"({statusClass.Substring(0, 1).ToUpper() + statusClass.Substring(1).ToLower()})")
                        }

                    </td>
                }
                <td class="@statusClass" style="width: 80px !important;">@(item.RequestClient.Address == null ? string.Concat(item.RequestClient.Address, ',', item.RequestClient.Street, ',', item.RequestClient.City, ',', item.RequestClient.State, ',', item.RequestClient.ZipCode) : string.Concat(item.RequestClient.Street, ',', item.RequestClient.City, ',', item.RequestClient.State, ',', item.RequestClient.ZipCode))</td>
                @if (Model.status != "Conclude" || Model.status != "Unpaid")
                {
                    <td class="@statusClass" style="width: 80px !important;">
                        Admin transferred to Dr. AGOLA on 10\10\2023 at 4:11:38 AM :
                        test
                    </td>
                }
                @*<td class="@statusClass">
            @if (Model.status != "New")
            {
            <button type="button" class="btn btn-light text-white" style="background-color: transparent;
            border-color: #ccc;">
            <img src="~/images/person.svg">
            Patient
            </button>

            }
            <button type="button" class="btn btn-light text-white" style="background-color: transparent;
            border-color: #ccc;">
            <img src="~/images/doctor.png" style="height: 20px; width: 20px; background-color: transparent;">
            Provider
            </button>
            </td>*@
                <td class="@statusClass">
                    <div class="dropdown" style="height:100%;display:flex">
                        <button class="dropbtn @statusClass" onclick="toggleDropdown()">Action</button>
                        <div class="dropdown-content">
                            @if (Model.status == "New")
                            {
                                        <button type="button" class="dropdown-item hover-dropdown-item text-dark mb-1" data-bs-toggle="modal" data-bs-target="#example2Modal" onclick="assignCaseData('@item.RequestId')"><div class="action-item ms-2"><img src="~/images/assign-case-image.svg" alt="" class="action-img px-1"><span>Assign Case</span></div></button>
                                <button type="button" class="dropdown-item hover-dropdown-item text-dark mb-1" @*onclick="openModal()"*@ data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="cancelCaseData('@item.RequestId', '@item.RequestClient.FirstName', '@item.RequestClient.LastName')"><div class="action-item ms-2"><img src="~/images/assign-case-image.svg" alt="" class="action-img px-1"><span class="text-dark">Cancel Case</span></div></button>

                            }
                            @if (Model.status == "New" || Model.status == "Pending" || Model.status == "Active" || Model.status == "Conclude" || Model.status == "ToClose" || Model.status == "Unpaid")
                            {
                                <a class="dropdown-item mb-1 hover-dropdown-item" asp-action="ViewCase" asp-controller="Admin" asp-route-requestId="@item.RequestId"><div class="action-item"><img src="~/images/view-case-image.png" alt="" class="action-img px-1" style="height: 20px; width: 25px;"><span>View Case</span></div></a>
                            }
                            @if (Model.status == "New" || Model.status == "Pending" || Model.status == "Active" || Model.status == "Conclude" || Model.status == "ToClose" || Model.status == "Unpaid")
                            {
                                <a class="dropdown-item mb-1 hover-dropdown-item" asp-action="ViewNotes" asp-controller="Admin" asp-route-requestId="@item.RequestId"><div class="action-item"><img src="~/images/view-notes-image.png" alt="" class="action-img pe-1" style="height: 20px; width: 20px;"><span>View Notes</span></div></a>
                            }
                            @if (Model.status == "New")
                            {
                                <button type="button" class="dropdown-item text-dark hover-dropdown-item" data-bs-toggle="modal" data-bs-target="#example3Modal" onclick="cancelCaseData('@item.RequestId', '@item.RequestClient.FirstName', '@item.RequestClient.LastName')"><div class="action-item"><img src="~/images/block-patient-image.png" alt="" class="action-img px-1" style="height: 20px; width: 30px;"><span>Block Patient</span></div></button>
                            }
                            @if (Model.status == "Pending" || Model.status == "Active" || Model.status == "Conclude" || Model.status == "ToClose" || Model.status == "Unpaid")
                            {
                                <a class="dropdown-item mb-1 hover-dropdown-item" asp-controller="Admin" asp-action="ViewUploads" asp-route-requestid="@item.RequestId" onclick="viewUploadsData('@item.RequestId', '@item.RequestClient.FirstName', '@item.RequestClient.LastName')"><div class="action-item"><img src="~/images/view-uploads-image.png" alt="" class="action-img pe-1" style="height: 20px; width: 20px;"><span>View Uploads</span></div></a>
                            }
                            @if (Model.status == "Pending")
                            {
                                                <button type="button" data-bs-toggle="modal" data-bs-target="#example9Modal" class="dropdown-item text-dark mb-1 hover-dropdown-item" href="#" onclick="transferRequestData('@item.RequestId')"><div class="action-item ms-2"><img src="~/images/assign-case-image.svg" alt="" class="action-img px-1"><span>Transfer</span></div></button>
                            }
                            @if (Model.status == "Pending" || Model.status == "ToClose")
                            {
                                <button type="button" data-bs-toggle="modal" data-bs-target="#example10Modal" class="dropdown-item mb-1 hover-dropdown-item text-dark" href="#" onclick="clearCaseData('@item.RequestId')"><div class="action-item ms-2"><img src="~/images/cancel-case-image.webp" alt="" class="action-img pe-1 ps-1" style="height: 20px; width: 30px;"><span>Clear Case</span></div></button>
                            }
                            @if (Model.status == "Pending")
                            {
                                <button type="button" data-bs-toggle="modal" data-bs-target="#SendAgreementModal" class="dropdown-item mb-1 hover-dropdown-item" href="#" onclick="sendAgreement('@item.RequestId')"><div class="action-item"><img src="~/images/send-agreement-image.svg" alt="" class="action-img pe-1" style="height: 20px; width: 20px;"><span>Send Agreement</span></div></button>
                            }
                            @if (Model.status == "Conclude" || Model.status == "ToClose" || Model.status == "Active")
                            {
                                <a class="dropdown-item mb-1 hover-dropdown-item" asp-action="Orders" asp-controller="Admin" asp-route-id="@item.RequestId"><div class="action-item"><img src="~/images/orders-image.png" alt="" class="action-img pe-1" style="height: 20px; width: 20px;"><span>Orders</span></div></a>
                                <a class="dropdown-item mb-1 hover-dropdown-item" href="#"><div class="action-item"><img src="~/images/assign-case-image.svg" alt="" class="action-img pe-1"><span>Doctor Note</span></div></a>
                                <a class="dropdown-item mb-1 hover-dropdown-item" href="#"><div class="action-item"><img src="~/images/assign-case-image.svg" alt="" class="action-img pe-1"><span>Encounter</span></div></a>
                            }
                            @if (Model.status == "ToClose")
                            {
                                <a class="dropdown-item hover-dropdown-item" href="#"><div class="action-item"><img src="~/images/cancel-case-image.webp" alt="" class="action-img"><span>Close Case</span></div></a>
                            }
                        </div>
                    </div>
                </td>
            </tr>
        }
    </tbody>
</table>

<div class="d-md-none">
    <div class="accordion accordion-flush" id="accordionExample">
        @* <div class="accordion-item">
        <h2 class="accordion-header">
        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
        <div class="d-flex justify-content-end">
        <p>Agola Three, Bhumi</p>
        <p>Patient</p>
        </div>
        </button>
        </h2>
        <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
        <div class="accordion-body">
        <strong>This is the first item's accordion body.</strong> It is shown by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.
        </div>
        </div>
        </div>
        <div class="accordion-item">
        <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
        Accordion Item #2
        </button>
        </h2>
        <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
        <div class="accordion-body">
        <strong>This is the second item's accordion body.</strong> It is hidden by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.
        </div>
        </div>
        </div>
        <div class="accordion-item">
        <h2 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
        Accordion Item #3
        </button>
        </h2>
        <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
        <div class="accordion-body">
        <strong>This is the third item's accordion body.</strong> It is hidden by default, until the collapse plugin adds the appropriate classes that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. It's also worth noting that just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit overflow.
        </div>
        </div>
        </div> *@
        @*@for (var i = 0; i < Model.requests.Count; i++)
        {*@
        @foreach (var item in Model.requests)
        {
            var statusClass = "";
            var dos = "";
            var notes = "";
            @if (item.RequestTypeId == 1)
            {
                statusClass = "patient";
            }
            else if (item.RequestTypeId == 4)
            {
                statusClass = "business";
            }
            else if (item.RequestTypeId == 2)
            {
                statusClass = "family";
            }
            else
            {
                statusClass = "concierge";
            }

            @*@if (Model.status == "New")
        {*@
            <div class="accordion-item">

                <h2 class="accordion-header" id="flush-heading@(item.RequestClientId)">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree(@item.RequestClientId)" aria-expanded="false" aria-controls="collapseThree(@item.RequestClientId)" style="background-color: #E5EEF5;">
                        <div class="d-flex flex-column w-100">
                            <div class="w-100">
                                <span>@(string.Concat(item.RequestClient.FirstName, ',', item.RequestClient.LastName))</span>
                                <div class="float-end">
                                    <span class="me-3">@(statusClass.Substring(0, 1).ToUpper() + statusClass.Substring(1).ToLower())</span>
                                    @if (statusClass == "patient")
                                    {
                                        <span class="categories-div-sub-sub float-end"
                                              style="height:1rem; width:1rem;border-radius:50%;background:#61B961;"></span>
                                    }
                                    else if (statusClass == "family")
                                    {
                                        <span class="categories-div-sub-sub float-end"
                                              style="height:1rem; width:1rem;border-radius:50%;background:#E69127;"></span>
                                    }
                                    else if (statusClass == "business")
                                    {
                                        <span class="categories-div-sub-sub float-end"
                                              style="height:1rem; width:1rem;border-radius:50%;background:#D9677C;"></span>
                                    }
                                    else
                                    {
                                        <span class="categories-div-sub-sub float-end"
                                              style="height:1rem; width:1rem;border-radius:50%;background:#0A7CB8;"></span>
                                    }
                                </div>
                            </div>
                            <div class="w-100 mt-3">

                                <div class="w-25">
                                    <span>@(item.RequestClient.Address == null ? string.Concat(item.RequestClient.Address, ',', item.RequestClient.Street, ',', item.RequestClient.City, ',', item.RequestClient.State, ',', item.RequestClient.ZipCode) : string.Concat(item.RequestClient.Street, ',', item.RequestClient.City, ',', item.RequestClient.State, ',', item.RequestClient.ZipCode))</span>
                                </div>
                                <div class="float-end mb-2 map-div">
                                    @*<a class="btn btn-outline-info rounded-3 fs-6 py-1 px-2 mt-0" href="#">Map Location</a>*@
                                    <a class="accordion-map map-abs-btn" data-address="@(string.Concat(item.RequestClient.Street, ", ", item.RequestClient.Address, ", ", item.RequestClient.City, ", ", item.RequestClient.State))">
                                        <span id="map-ttle" class="d-none d-sm-block map-location-text">Map Location</span>
                                        <svg id="map-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#00ccff" class="bi bi-geo-alt d-sm-none" viewBox="0 0 16 16">
                                            <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A32 32 0 0 1 8 14.58a32 32 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10" />
                                            <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6" />
                                        </svg>
                                    </a>
                                </div>
                            </div>
                            @if (Model.status == "New")
                            {
                                <div>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#54B4D3" class="bi bi-clock" viewBox="0 0 16 16">
                                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71z" />
                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0" />
                                    </svg><span class="text-muted ms-2">Wait Time: </span>
                                </div>
                            }
                        </div>
                    </button>
                </h2>
                <div id="collapseThree(@item.RequestClientId)" class="accordion-collapse collapse" aria-labelledby="flush-heading@(item.RequestClientId) data-bs-parent="#accordionExample">
                    <div class="accordion-body" style="background-color: #E5EEF5;">
                        <div style="position: relative;">
                            <button type="button" class="btn btn-light view-case-button">View Case</button>
                            @if (Model.status != "Unpaid")
                            {
                                <div><img src="~/images/calendar2-date.svg"><span class="ms-2">Date of birth:  @(DateTime.Parse($"{item.RequestClient.IntYear}-{item.RequestClient.StrMonth}-{item.RequestClient.IntDate}").ToString("MMMM dd,yyyy"))(12)</span></div>
                            }
                            <div class="mt-2"><img src="~/images/envelope.svg"><span class="ms-2">Email:  @item.RequestClient.Email</span></div>
                            @if (Model.status != "ToClose")
                            {
                                <div class="mt-2"><img src="~/images/telephone.svg" /><span class="ms-2">Patient:  @item.RequestClient.PhoneNumber</span></div>
                            }
                            @if (Model.status == "Pending" || Model.status == "Active" || Model.status == "ToClose")
                            {
                                <div class="mt-2">
                                    <img src="~/images/file-earmark.svg" />
                                    <span class="w-25">Transfer Notes: </span>
                                    <span>
                                        Admin transferred to Dr. AGOLA on 10\10\2023 at 4:11:38 AM :
                                        test
                                    </span>
                                </div>
                            }
                            @if (Model.status != "New")
                            {
                                <div class="mt-2"><img src="~/images/calendar2-date.svg"><span class="ms-2">Date of service:  </span></div>
                                <div class="mt-2"><img src="~/images/person.svg"><span class="ms-2">Physician:  </span></div>
                            }
                            @if (Model.status == "New" || Model.status == "Pending" || Model.status == "Active")
                            {
                                <div class="mt-2"><img src="~/images/person.svg" /><span class="ms-2">Requestor:  @(statusClass.Substring(0, 1).ToUpper() + statusClass.Substring(1).ToLower()) @(string.Concat(item.FirstName, ',', item.LastName))</span></div>
                            }
                            @if (Model.status == "ToClose")
                            {
                                <div class="mt-2"><img src="~/images/globe-central-south-asia.svg" /><span class="ms-2">Region:  @item.RequestClient.State</span></div>
                            }
                        </div>

                        @*Buttons of accordion*@
                        <div class="d-flex justify-content-center align-items-center">
                            <div class="row mt-3">
                                @if (Model.status == "New")
                                {

                                    <div class="col-6">
                                        <button type="button" class="btn rounded-pill btn-sm all-accordion-button w-100 assign-case-button">Assign Case</button>
                                    </div>
                                    <div class="col-6">
                                        <button type="button" class="btn btn-danger rounded-pill btn-sm all-accordion-button w-100">Cancel Case</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill btn-sm all-accordion-button w-100 green-button">View Notes</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn btn-danger rounded-pill btn-sm all-accordion-button w-100">Block Patient</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill btn-sm all-accordion-button w-100 green-button">Email</button>
                                    </div>

                                }

                                @if (Model.status == "Pending")
                                {
                                    <div class="col-6">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 yellow-button">Send Agreement</button>
                                    </div>
                                    <div class="col-6">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">View Notes</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 blue-button">Transfer</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">View Uploads</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 yellow-button">Clear Case</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">Email</button>
                                    </div>
                                }

                                @if (Model.status == "Active")
                                {
                                    <div class="col-6">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">View Notes</button>
                                    </div>
                                    <div class="col-6">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 dark-green-button">Doctors Notes</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">View Uploads</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">Encounter</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 yellow-button">Orders</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">Email</button>
                                    </div>
                                }

                                @if (Model.status == "Conclude")
                                {
                                    <div class="col-6">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">View Notes</button>
                                    </div>
                                    <div class="col-6">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 dark-green-button">Doctors Notes</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">View Uploads</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">Encounter</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 yellow-button">Orders</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">Email</button>
                                    </div>
                                }

                                @if (Model.status == "ToClose")
                                {
                                    <div class="col-6">
                                        <button type="button" class="btn btn-danger rounded-pill all-accordion-button w-100">Close Case</button>
                                    </div>
                                    <div class="col-6">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button ggreen-button">View Notes</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 dark-green-button">Doctors Notes</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">View Uploads</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">Encounter</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 yellow-button">Clear Case</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn rounded-pill all-accordion-button w-100 green-button">Email</button>
                                    </div>
                                }

                                @if (Model.status == "Unpaid")
                                {
                                    <div class="col-6">
                                        <button type="button" class="btn green-button rounded-pill all-accordion-button w-100">View Notes</button>
                                    </div>
                                    <div class="col-6">
                                        <button type="button" class="btn green-button rounded-pill all-accordion-button w-100">View Uploads</button>
                                    </div>
                                    <div class="col-6 mt-2">
                                        <button type="button" class="btn green-button rounded-pill all-accordion-button w-100">Email</button>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            @*}*@
        }
        @*}*@
    </div>
</div>

<div class="modal fade" id="SendAgreementModal" tabindex="-1" aria-labelledby="SendAgreementModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-info">
                <h5 class="modal-title text-white" id="SendAgreementModalLabel">
                    Send Agreement
                </h5>
                <button type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="requestForm" method="post" asp-action="AssignCaseSubmitAction" asp-controller="Admin">
                    <input type="number" hidden asp-for="RequestId" id="r-id-for-agree" />
                    <input type="number" hidden id="r-type-id-two" />
                    <div id="patient-data" style="display: none;">
                        <div class="categories-div-sub-sub m-auto"
                             style="height:1rem; width:1rem;border-radius:50%;background:#61B961;"></div>
                        <div>Patient</div>
                    </div>
                    <div id="family-data" style="display: none;">
                        <div class="categories-div-sub-sub m-auto"
                             style="height:1rem; width:1rem;border-radius:50%;background:#E69127;"></div>
                        <div>Family</div>
                    </div>
                    <div id="business-data" style="display: none;">
                        <div class="categories-div-sub-sub m-auto"
                             style="height:1rem; width:1rem;border-radius:50%;background:#D9677C;"></div>
                        <div>Business</div>
                    </div>
                    <div id="concierge-data" style="display: none;">
                        <div class="categories-div-sub-sub m-auto"
                             style="height:1rem; width:1rem;border-radius:50%;background:#0A7CB8;"></div>
                        <div>Concierge</div>
                    </div>
                    <p class="mb-3 text-muted fs-4">To send agreement, please make sure you are updating the correct contact information below for the responsible party</p>
                    <div class="dropdown text-light mb-3 w-100">
                        <select class="btn border border-info dropdown-toggle text-secondary w-100" style="text-align:start" data-bs-toggle="dropdown" aria-expanded="false" class="bg-white" name="RegionId" id="select-region" onchange="fetchRegionData()">
                            <i class="bi bi-person"></i> Narrow Search by Region
                            @foreach (var item in Model.regions)
                            {
                                <option value="@item.RegionId" class="bg-white">@item.Name</option>
                            }
                        </select>
                    </div>
                    <div class="dropdown text-light mb-3 w-100">
                        <select class="btn border border-info dropdown-toggle text-secondary w-100" style="text-align:start" data-bs-toggle="dropdown" aria-expanded="false" class="bg-white" name="selectedPhysicianId" id="select-physician">
                            <i class="bi bi-person"></i> Select Physician

                        </select>
                    </div>
                    <div class="form-group">
                        <textarea class="form-control border border-info" id="exampleFormControlTextarea1" placeholder="Description" rows="5" name="assignCaseDescription"></textarea>
                    </div>

                    <div class="text-end mb-3 me-3 mt-3">
                        <button type="submit" class="btn btn-info text-white" id="continueBtn">Confirm</button>
                        <button type="button" class="btn btn-outline-info" data-bs-dismiss="modal">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>

<script>
    let isDropdownActive = false;

    //function toggleDropdown() {
    //    const dropdown = document.querySelector('.dropdown');
    //    isDropdownActive = !isDropdownActive;
    //    dropdown.classList.toggle('active');
    //}
    //document.addEventListener('click', (event) => {
    //    const dropdown = document.querySelector('.dropdown');
    //    if (isDropdownActive && !dropdown.contains(event.target)) {
    //        isDropdownActive = false;
    //        dropdown.classList.remove('active');
    //    }
    //});
    //$(document).ready(function () {
    //    $("#dtBasicExample").DataTable();
    //});



    var modal6 = document.getElementById("myModal6");
    //var btn = document.getElementsByClassName("map-button");
    var spany6 = document.getElementsByClassName("close6")[0];
    var map = document.getElementsByClassName("map-abs-btn");

    for (let i = 0; i < map.length; ++i) {
        map[i].onclick = function () {

            var address = map[i].getAttribute("data-address");
            MapFunc(address);
        };
    }

    function MapFunc(address) {
        console.log(address);
        var address1 = `https://maps.google.com/maps?q= + ${address} + &t=&z=13&ie=UTF8&iwloc=&output=embed`;
        document.getElementById('gmap_canvas').src = address1;
        modal6.style.display = "block";
    }
    spany6.onclick = function () {
        modal6.style.display = "none";
    }
    window.onclick = function (event) {
        if (event.target == modal6) {
            modal6.style.display = "none";
        }
    }

    function sendAgreement(id)
    {
        console.log(id);
        document.getElementById("r-id-for-agree").value = id;

        $.ajax({
            url: '/Admin/sendAgreement2',
            type: 'GET',
            data: {reqTypeId, id},
            success: function(data){
                document.getElementById("r-type-id-two").value = data;
            },

            error: function(error){
                console.error("Error fetching data: ", error);
            }
        });

        console.log(data);
    }

    const rtid = document.getElementById("r-type-id-two").value;
    if (rtid == 1) {
        document.getElementById("patient-data").style.display = "block";
    }
    else if (rtid == 2) {
        document.getElementById("family-data").style.display = "block";
    }
    else if (rtid == 2) {
        document.getElementById("concierge-data").style.display = "block";
    }
    else {
        document.getElementById("business-data").style.display = "block";
    }
</script>